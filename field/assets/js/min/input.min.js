!function(t){function a(a){function n(){var a=t(_).find("tr"),n=t(a).find("input");n.each(function(){(""==t(this).val()||isNaN(t(this).val()))&&t(this).val("0")});var d=0,i=0,s=0,e=0,c=0,l=0,o=0,f=0,r=0,p=0,y=0,b=0,v=0,h=0;t(a).find("td.day_base input").each(function(){d+=Number(t(this).val())}),t(a).find("td.day_staff input").each(function(){i+=Number(t(this).val())}),t(a).find("td.day_tour_1 input").each(function(){s+=Number(t(this).val())}),t(a).find("td.day_tour_2 input").each(function(){e+=Number(t(this).val())}),t(a).find("td.day_tour_3 input").each(function(){c+=Number(t(this).val())}),t(a).find("td.day_tour_4 input").each(function(){l+=Number(t(this).val())}),t(a).find("td.day_tour_5-6 input").each(function(){o+=Number(t(this).val())}),t(a).find("td.day_tour_7-8 input").each(function(){f+=Number(t(this).val())}),t(a).find("td.day_tour_9-12 input").each(function(){r+=Number(t(this).val())}),t(a).find("td.day_tour_13-24 input").each(function(){p+=Number(t(this).val())}),t(a).find("td.day_tour_25-39 input").each(function(){y+=Number(t(this).val())}),t(a).find("td.day_meals input").each(function(){b+=Number(t(this).val())}),t(a).find("td.day_tickets input").each(function(){v+=Number(t(this).val())}),t(a).find("td.day_misc input").each(function(){h+=Number(t(this).val())}),t(u).find(".base_total_var").val(parseFloat(b+v+h)),t(u).find(".base_total_1").val(parseFloat(d+i+s)),t(u).find(".base_total_2").val(parseFloat(d+i+e)),t(u).find(".base_total_3").val(parseFloat(d+i+c)),t(u).find(".base_total_4").val(parseFloat(d+i+l)),t(u).find(".base_total_5-6").val(parseFloat(d+i+o)),t(u).find(".base_total_7-8").val(parseFloat(d+i+f)),t(u).find(".base_total_9-12").val(parseFloat(d+i+r)),t(u).find(".base_total_13-16").val(parseFloat(d+i+p)),t(u).find(".base_total_17-20").val(parseFloat(d+i+p)),t(u).find(".base_total_21-24").val(parseFloat(d+i+p)),t(u).find(".base_total_25-34").val(parseFloat(d+i+y)),t(u).find(".base_total_35-39").val(parseFloat(d+i+y))}function d(){var n={};n.finals=[],n.per_day=[];var d={};d.per_day=[],d.finals={};var i=t(_).find("tr"),u=a.find(".acf-costing_table-output input");e.find("tr").eq(1).find("th").each(function(a,d){var i=t(d);n.finals.push(i.data("field"))}),e.find("tr").last().find("th input").each(function(a,i){var s=t(i);d.finals[n.finals[a]]=s.val()}),s.find("tr").last().find("th").each(function(a,d){var i=t(d);a>0&&n.per_day.push(i.data("field"))}),i.each(function(a,i){var s={};t(i).find("td input").each(function(a,d){var i=t(d);s[n.per_day[a]]=i.val()}),d.per_day.push(s)}),u.val(JSON.stringify(d))}var i=a.find(".acf-costing_table"),s=t(i).find("thead"),_=t(i).find("tbody"),e=t(i).find("tfoot"),u=t(e).find(".acf-costing_totals");t(".acf-costing_table-add_day").on("click",function(){var a="",n=t(_).find("tr").length+1;if(a+='<tr class="costing_day costing_day_'+n+'">',a+='<td class="day_count">'+n+"</td>",a+='<td class="day_base">       <input type="number" class="day_'+n+'_base" /></td>',a+='<td class="day_staff">      <input type="number" class="day_'+n+'_staff" /></td>',a+='<td class="day_tour_1">     <input type="number" class="day_'+n+'_tour_1" /></td>',a+='<td class="day_tour_2">     <input type="number" class="day_'+n+'_tour_2" /></td>',a+='<td class="day_tour_3">     <input type="number" class="day_'+n+'_tour_3" /></td>',a+='<td class="day_tour_4">     <input type="number" class="day_'+n+'_tour_4" /></td>',a+='<td class="day_tour_5-6">   <input type="number" class="day_'+n+'_tour_5-6" /></td>',a+='<td class="day_tour_7-8">   <input type="number" class="day_'+n+'_tour_7-8" /></td>',a+='<td class="day_tour_9-12">  <input type="number" class="day_'+n+'_tour_9-12" /></td>',a+='<td class="day_tour_13-24"> <input type="number" class="day_'+n+'_tour_13-24" /></td>',a+='<td class="day_tour_25-39"> <input type="number" class="day_'+n+'_tour_25-39" /></td>',a+='<td class="day_meals">      <input type="number" class="day_'+n+'_meals" /></td>',a+='<td class="day_tickets">    <input type="number" class="day_'+n+'_tickets"  /></td>',a+='<td class="day_misc">       <input type="number" class="day_'+n+'_misc" /></td>',a+="</tr>",t(_).append(a),n>1)for(var d=n-1,i=t(".costing_day_"+d),s=t(".costing_day_"+n),e=t(s).find("td").length-1,u=0;e>=u;u++)s.find("td input").eq(u).val(i.find("td input").eq(u).val());++n}),t(".acf-costing_table-remove_day").on("click",function(){t(_).find("tr:last").remove()}),t(".acf-costing_table-calc").on("click",function(){n(),d()}),u.find("input").on("change",function(){d()})}"undefined"!=typeof acf.add_action&&acf.add_action("ready append",function(n){acf.get_fields({type:"costing_table"},n).each(function(){a(t(this))})})}(jQuery);